---
layout: post
title: "คำสั่งเอาไว้ใช้แก้ไข Network"
date: 2020-01-30 15:51:05 +0700
description: วันนี้มีคำสั่งมาฝากเอาไว้ใช้ติดตัวเวลาต้องแก้ไขปัญหาเกี่ยวกับ Network บนเครื่องที่รัน Windows
tags:
- DOS
- Windows
comments: true
---
ก่อนอื่นเปิด command prompt ขึ้นมาก่อนเลย เพราะคำสั่งที่จะพูดถึงทั้งหมดนี้จะรันอยู่บน DOS นะครับ - เอาล่ะมาเริ่มกันเลย

`ipconfig /release` - เอาไว้สั่งปลอดปล่อยค่า IP แต่ทำไมต้อง release? ก็บางทีเราดูแล้วว่าค่า IP ที่ได้มาน่าจะเพี้ยน ๆ ไป หรือมีอะไรไม่ถูกต้อง ถ้างั้นก็ลองเอาค่าออกไปก่อน

`ipconfig /renew` - พอปลดปล่อย IP ไปแล้วเครื่องเราก็จะไม่มีค่า IP แต่อยู่บน LAN เครื่องก็ต้องการค่า IP นี่นา งั้นเราก็ต้องใช้ renew เพื่อจะรับค่ามาใหม่ *ตรงนี้ที่ว่า ปลดค่าออกไป/รับใหม่เข้ามา อันนี้ต้องอยู่ใน LAN ที่เป็น DHCP นะ คือเราก็เป็น DHCP Client แล้วก็มีใครสักคนทำหน้าที่เป็น DHCP Server ให้ด้วย*

`ipconfig /registerdns` - คำสั่งนี้เอาไว้ลงทะเบียนเครื่องเราเข้าไปใน DNS *ปกติ DNS จะมี AD ดูแลรวมไปด้วยกันอยู่แล้ว แต่ก็ถ้ามีข้อขัดข้องไง ก็ต้องคำสั่งนี้ไง เชื่อเถอะ! คำสั่งนี้มีโอกาสได้ใช้แน่นอน*

`ipconfig /flushdns` - อันนี้เอาไว้ flush ซึ่งนั่นก็คือปลด / โล๊ะ / ล้าง ค่า DNS ที่จำ ๆ ไว้ใน cache ทิ้งให้หมด

`ipconfig /displaydns` - คำสั่งนี้ สั่งแล้วอาจจะได้ผลลัพธ์ที่ยืดยาว เพราะว่าจะแสดงค่า DNS ที่อยู่ใน cache ออกมานั่นเอง หรือถ้า flush ก่อนแล้ว display ก็จะไม่เห็นอะไรเลย

*จบไป 1 ด่าน*

ที่ผ่านไปแล้วนั่นคือแบบเบา ๆ คราวนี้มาเข้าแบบหนัก ๆ เพราะสั่งแล้วจะเป็นการล้างบาง reset TCP/IP stack ของ Windows กันไปเลย *ตรงนี้ให้เข้า command prompt ด้วยการ run as administrator ด้วยนะครับ*

`netsh winsock reset` - คำสั่งนี้จะ reset ค่า socket ทั้งหมดที่บางครั้งอาจจะรวนทำให้เกิดความปั่นป่วนไม่สามารถใช้งาน Network ได้

`netsh int ip reset` หรือเพิ่ม `netsh int ip reset c:\resetlog.txt` - คำสั่งนี้มีคนเปรียบเทียบว่าจะ ทุบ stack ของ TCP/IP ให้เละแล้วสร้างขึ้นมาใหม่ด้วยการเขียนไปที่ registry 2 ตัวนี้

```console
SYSTEM\CurrentControlSet\Services\Tcpip\Parameters
SYSTEM\CurrentControlSet\Services\DHCP\Parameters
```

ลงรายละเอียดอีกนิด

`netsh int ipv4 reset`

`netsh int ipv6 reset`

แยกกันถ้าจะทำกับ IPv4 หรือ IPv6 แบบเฉพาะเจาะจง ส่วนรายละเอียดทั้งหมดเกี่ยวกับคำสั่งที่เราพูดกันมา แต่เราไม่ได้พูดถึง เอ๊ะ! ยังไง? - ไม่ล่ะ เพราะรายละเอียดเรา google กันเองอีกทีอยู่แล้วนี่นา :)
